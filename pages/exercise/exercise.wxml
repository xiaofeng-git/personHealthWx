<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="header">
    <text class="title">è¿åŠ¨è®°å½•</text>
    <text class="title-emoji">ğŸ‹ï¸â€â™‚ï¸</text>
  </view>

  <!-- å‚æ•°è¾“å…¥è¡¨å• -->
  <view class="form-card card">
    <!-- æ€§åˆ«é€‰æ‹© -->
    <view class="form-item">
      <text class="label">æ€§åˆ«</text>
      <view class="gender-selector">
        <view class="gender-option {{gender === 'male' ? 'active' : ''}}" 
              bindtap="selectGender" data-gender="male">
          <text class="gender-icon">â™‚</text>
          <text>ç”·æ€§</text>
        </view>
        <view class="gender-option {{gender === 'female' ? 'active' : ''}}" 
              bindtap="selectGender" data-gender="female">
          <text class="gender-icon">â™€</text>
          <text>å¥³æ€§</text>
        </view>
      </view>
    </view>

    <!-- ä½“é‡è¾“å…¥ -->
    <view class="form-item">
      <text class="label">ä½“é‡</text>
      <picker mode="selector" 
              range="{{weightRange}}" 
              value="{{weightIndex}}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
              bindchange="onWeightChange">
        <view class="picker {{weight ? '' : 'placeholder'}}">
          {{weight || 'è¯·é€‰æ‹©'}}
          <text class="unit">kg</text>
        </view>
      </picker>
    </view>

    <!-- è¿åŠ¨ç±»å‹é€‰æ‹© -->
    <view class="form-item">
      <text class="label">è¿åŠ¨ç±»å‹</text>
      <picker mode="selector"
              bindchange="onExerciseTypeChange" 
              value="{{selectedExerciseIndex}}" 
              range="{{exerciseTypes}}" 
              range-key="name">
        <view class="picker-value">
          <text>{{selectedExercise.name || 'è¯·é€‰æ‹©è¿åŠ¨ç±»å‹'}}</text>
          <text class="picker-arrow">â–¼</text>
        </view>
      </picker>
    </view>

    <!-- è¿åŠ¨æ—¶é•¿ -->
    <view class="form-item">
      <text class="label">è¿åŠ¨æ—¶é•¿</text>
      <picker mode="selector" 
              range="{{durationRange}}" 
              value="{{durationIndex}}"
              bindchange="onDurationChange">
        <view class="picker-value">
          <text>{{duration || '0'}} åˆ†é’Ÿ</text>
          <text class="picker-arrow">â–¼</text>
        </view>
      </picker>
    </view>
  </view>

  <!-- å¡è·¯é‡Œè®¡ç®—ç»“æœ -->
  <view class="result-card card">
    <view class="calories-result">
      <text class="result-label">é¢„è®¡æ¶ˆè€—</text>
      <view class="calories-value">
        <text class="number">{{calories || 0}}</text>
        <text class="unit">åƒå¡</text>
      </view>
    </view>
    <button class="save-btn" 
            bindtap="saveExercise"
            type="primary"
            disabled="{{!selectedExercise || !duration}}">
      ä¿å­˜è®°å½•
    </button>
  </view>

  <!-- å†å²è®°å½• -->
  <view class="history-card card">
    <view class="card-title">
      <text class="title-text">è¿åŠ¨å†å²</text>
      <text class="title-emoji">ğŸ“…</text>
    </view>
    <view class="history-list">
      <block wx:if="{{historyRecords && historyRecords.length > 0}}">
        <view class="history-item" 
              wx:for="{{historyRecords}}" 
              wx:key="id">
          <view class="history-info">
            <view class="history-header">
              <text class="history-type">{{item.type}}</text>
              <text class="history-calories">-{{item.calories}}åƒå¡</text>
            </view>
            <view class="history-details">
              <text class="history-duration">{{item.duration}}åˆ†é’Ÿ</text>
              <text class="history-time">{{item.createdAt}}</text>
            </view>
          </view>
        </view>
      </block>
      <view wx:else class="no-records">
        <text>æš‚æ— è¿åŠ¨è®°å½•</text>
      </view>
    </view>
  </view>
</view> 